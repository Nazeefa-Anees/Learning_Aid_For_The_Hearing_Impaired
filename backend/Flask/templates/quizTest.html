<!DOCTYPE html>
<html>
<head>
	<title>Hand Sign Detection Quiz</title>
	<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.11.0/dist/tf.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/handpose@0.10.0/dist/handpose.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/handpose@0.10.0/dist/handpose.min.js"></script>
</head>
<body>
	<h1>Hand Sign Detection Quiz</h1>
	<video id="video" width="400" height="300"></video>
	<button id="capture" onclick="capture()">Capture Image</button>
	<canvas id="canvas" width="400" height="300"></canvas>
	<img id="image" src="" width="400" height="300" style="display: none;">
	<div id="result"></div>
	<script>
		const video = document.getElementById('video');
		const canvas = document.getElementById('canvas');
		const context = canvas.getContext('2d');
		const captureButton = document.getElementById('capture');
		const image = document.getElementById('image');
		const result = document.getElementById('result');

		async function setupCamera() {
			if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
				throw new Error('Browser API navigator.mediaDevices.getUserMedia not available');
			}

			video.srcObject = await navigator.mediaDevices.getUserMedia({
				audio: false,
				video: {
					facingMode: "user",
					width: 400,
					height: 300
				}
			});
			await new Promise((resolve) => video.onloadedmetadata = resolve);
			video.play();
		}

		async function capture() {
			context.drawImage(video, 0, 0, canvas.width, canvas.height);
			image.src = canvas.toDataURL('image/png');
			const data = new FormData();
			data.append('image', image.src);
			const response = await fetch('/predict', {
				method: 'POST',
				body: data
			});
			const resultData = await response.json();
			result.innerHTML = `Label: ${resultData.label}, Accuracy: ${resultData.accuracy}, Message: ${resultData.message}`;
		}

		setupCamera();
	</script>
</body>
</html>
