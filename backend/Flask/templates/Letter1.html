<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Letter1</title>
	<link rel="icon" href="favicon.ico">
    <link rel="stylesheet" type="text/css" href="../static/css/Letter.css">
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils@0.6/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils_3d@0.3/control_utils_3d.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.3/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4/hands.js" crossorigin="anonymous"></script>
    <script type="module" src="../static/js/showHands.js"></script>

	<script>
		function startCamera() {
		// Hide the button
		document.getElementById("start-camera").style.display = "none";

		// Display the countdown
		var countdown = 3;
		var countdownInterval = setInterval(function() {
			document.getElementById("count-down").innerHTML = countdown;
			countdown--;
			if (countdown < 0) {
			clearInterval(countdownInterval);
			document.getElementById("count-down").style.display = "none";
			document.getElementById("count-blur").style.display = "none";
			document.getElementById("showHands").style.display = "inline";

			// Start the camera and process_camera_stream
			var totalSeconds = 10;
			var secondsRemaining = totalSeconds;
			var countDownInterval = setInterval(function() {
				document.getElementById("dataCollection").innerHTML = secondsRemaining;
				secondsRemaining--;
				if (secondsRemaining < 0) {
				clearInterval(countDownInterval);
				}
			}, 1000);

			// Call the Flask camera_stream and process_camera_stream routes
			setTimeout(function() {
				{{ camera_stream }}
				{{ process_camera_stream }}
			}, 3000); // Wait for 3 seconds before starting the stream
			}
		}, 1000);
		}
	</script>

  </head>
  <body>
    <div class="page-container">
		<!-- Background Image -->
      	<div class="bg">

			<!-- Text -->
			<div class="Text">
				<h1 class="font-family: myFont;">
				w
				</h1>
			</div>

			<!-- Camera -->
			<div class="Camera">
				<button class="camButton" id="start-camera" onclick="startCamera()">Start Camera</button>
				<div id="count-blur" class="countdown"><div id="count-down"class="countdown-text"></div></div>
				<div id="showHands" class="container" style= "display: none;">
					<div id="dataCollection" class="dataCollection"></div>
					<video class="input_video" style="display: none;"></video>
					<canvas class="output_canvas" width="100%" height="100%"></canvas>
					<div class="control-panel" style="display: none;"></div>
				</div>
			</div>

			<!-- Image -->
			<div class="Imgdiv">
				<img src="../static/assets/dataset_icons/letters/1.JPG" alt="Letter1" class="image">
			</div>

			<!-- Back Arrow -->
			<a href="/letters">
				
				<div class="button2" style="background-image: url(../static/assets/backarrow.png);"></div>
				
			</a>


			<!-- Home Icon -->
			
				
				<div class="button3" style="background-image: url(../static/assets/homeicon.png);"></div>
				
			
		

			<!-- Next -->
			
				<div class="button4" style="background-image: url(../static/assets/next.png);"></div>
			
		</div>
    </div>
  </body>
</html>
